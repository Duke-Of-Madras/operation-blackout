<!DOCTYPE html>
<html lang="en">
<head>
    <title>Blackout War Room</title>
    <style>
        body { background: #000; color: #fff; font-family: 'Courier New', monospace; margin: 0; display: flex; height: 100vh; overflow: hidden; }
        
        /* LEFT SIDE: KILL FEED */
        .feed-panel { width: 30%; border-right: 2px solid #333; padding: 20px; overflow-y: auto; background: #0a0a0a; }
        .feed-title { font-size: 1.5rem; border-bottom: 2px solid #f00; padding-bottom: 10px; margin-bottom: 20px; color: #f00; text-transform: uppercase; letter-spacing: 2px; }
        .kill-item { margin-bottom: 15px; padding: 10px; border-left: 3px solid #f00; background: #111; animation: flash 1s; }
        .kill-time { font-size: 0.8rem; color: #666; }
        .kill-msg { font-size: 1rem; margin-top: 5px; }
        .killer-team { color: #f00; font-weight: bold; }
        .victim { color: #fff; text-decoration: line-through; }

        /* RIGHT SIDE: MAIN STATS */
        .main-panel { width: 70%; padding: 20px; text-align: center; display: flex; flex-direction: column; }
        .stats { display: flex; justify-content: center; gap: 50px; margin-bottom: 30px; }
        .box { background: #111; padding: 30px; border-radius: 10px; min-width: 150px; border: 1px solid #333; }
        .num { font-size: 4rem; font-weight: bold; display: block; }
        .alive { color: #0f0; } .dead { color: #f00; }
        
        table { width: 90%; margin: 0 auto; border-collapse: collapse; font-size: 0.9rem; }
        td { padding: 8px; border-bottom: 1px solid #222; text-align: left; }
        .status-DEAD { color: #555; text-decoration: line-through; }
        .status-ALIVE { color: #0f0; }
        
        @keyframes flash { 0% { background: #500; } 100% { background: #111; } }
    </style>
</head>
<body>

    <div class="feed-panel">
        <div class="feed-title">Kill History</div>
        <div id="kill-feed">Loading...</div>
    </div>

    <div class="main-panel">
        <h1 style="letter-spacing: 5px; margin-bottom: 40px;">WAR ROOM</h1>
        <div class="stats">
            <div class="box"><span id="alive-count" class="num alive">--</span>ALIVE</div>
            <div class="box"><span id="dead-count" class="num dead">--</span>DEAD</div>
        </div>
        <div style="overflow-y: auto; flex-grow: 1;">
            <table id="roster"></table>
        </div>
    </div>

    <script>
        // ▼▼▼ PASTE YOUR NEW GOOGLE SCRIPT URL BELOW ▼▼▼
        const API_URL = "https://script.google.com/macros/s/AKfycbx1pDvCXGTZfhmj7ZIrFqfiJYXqjokbwDCeTnpvuAunjyefqwz7RorKTHAebXDNkwc_/exec"; 

        async function updateScoreboard() {
            try {
                const res = await fetch(API_URL);
                const data = await res.json();
                
                let alive = 0, dead = 0;
                let rosterHtml = "";
                let feedHtml = "";
                
                // Sort data: Dead people with timestamps go to the feed
                // We want the newest kills at the top
                const kills = data.filter(p => p.status === "DEAD" && p.time).reverse();

                data.forEach(p => {
                    if(p.status === "DEAD") dead++; else alive++;
                    rosterHtml += `<tr><td>${p.name}</td><td>${p.team}</td><td class="status-${p.status}">${p.status}</td></tr>`;
                });

                kills.forEach(k => {
                    feedHtml += `
                        <div class="kill-item">
                            <div class="kill-time">${k.time}</div>
                            <div class="kill-msg">
                                <span class="killer-team">${k.killer || "Unknown"}</span> 
                                eliminated 
                                <span class="victim">${k.name}</span>
                            </div>
                        </div>
                    `;
                });

                document.getElementById('alive-count').innerText = alive;
                document.getElementById('dead-count').innerText = dead;
                document.getElementById('roster').innerHTML = rosterHtml;
                document.getElementById('kill-feed').innerHTML = feedHtml || "<div style='color:#444'>No casualties yet...</div>";
                
            } catch (err) { console.error(err); }
        }

        setInterval(updateScoreboard, 5000);
        updateScoreboard();
    </script>
</body>
</html>

